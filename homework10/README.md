 
# Домашнее задание №10
В рамках данного задания выполняется сравнение быстродействия PostgreSQL с другой СУБД при работе с большим объёмом данных.

---
## Подготовка


clickhouse
```
bubuntu20042 :) select count() from default.yellow_tripdata where passenger_count = 6;

SELECT count()
FROM default.yellow_tripdata
WHERE passenger_count = 6

Query id: fb59c3ef-3703-45fb-bfd8-5e1ece4e0b5c

   ┌─count()─┐
1. │ 2377311 │ -- 2.38 million
   └─────────┘

1 row in set. Elapsed: 0.082 sec. Processed 101.25 million rows, 404.99 MB (1.24 billion rows/s., 4.94 GB/s.)
Peak memory usage: 293.59 KiB.
```

postgres
```
test=# \timing on
Секундомер включён.
test=# select count(*) from yellow_tripdata where passenger_count = 6;
  count  
---------
 2377311
(1 строка)

Время: 45384,013 мс (00:45,384)
```

clickhouse
```
bubuntu20042 :) select * from default.yellow_tripdata where tpep_pickup_datetime like '%2019-01-01 00:00%';

SELECT *
FROM default.yellow_tripdata
WHERE tpep_pickup_datetime LIKE '%2019-01-01 00:00%'

Query id: 30580d23-b25b-435c-b407-6e372b52552f

    ┌─VendorID─┬─tpep_pickup_datetime─┬─tpep_dropoff_datetime─┬─passenger_count─┬─trip_distance─┬─RatecodeID─┬─store_and_fwd_flag─┬─PULocationID─┬─DOLocationID─┬─payment_type─┬─fare_amount─┬─extra─┬─mta_tax─┬─tip_amount─┬─tolls_amount─┬─improvement_surcharge─┬─total_amount─┬─congestion_surcharge─┐
 1. │        2 │ 2019-01-01 00:00:00  │ 2019-01-01 01:03:12   │               2 │          7.37 │          1 │ N                  │          237 │          264 │            2 │          23 │   0.5 │     0.5 │          0 │            0 │                   0.3 │         24.8 │                      │
 2. │        1 │ 2019-01-01 00:00:19  │ 2019-01-01 00:09:54   │               1 │           1.8 │          1 │ N                  │          249 │            4 │            2 │           8 │   0.5 │     0.5 │          0 │            0 │                   0.3 │          9.8 │                      │
 3. │        1 │ 2019-01-01 00:00:58  │ 2019-01-01 00:06:38   │               1 │           0.8 │          1 │ N                  │          148 │           79 │            1 │           5 │   0.5 │     0.5 │          2 │            0 │                   0.3 │          8.8 │                      │
 4. │        1 │ 2019-01-01 00:00:50  │ 2019-01-01 00:31:48   │               0 │            18 │          2 │ N                  │          132 │          140 │            1 │          52 │     0 │     0.5 │          7 │            0 │                   0.3 │         59.8 │                      │
 5. │        1 │ 2019-01-01 00:00:03  │ 2019-01-01 00:04:26   │               1 │           0.6 │          1 │ N                  │           80 │          112 │            2 │           5 │   0.5 │     0.5 │          0 │            0 │                   0.3 │          6.3 │                      │
 6. │        1 │ 2019-01-01 00:00:47  │ 2019-01-01 00:13:07   │               1 │           1.1 │          1 │ N                  │          140 │          237 │            2 │           9 │   0.5 │     0.5 │          0 │            0 │                   0.3 │         10.3 │                      │
 7. │        1 │ 2019-01-01 00:00:48  │ 2019-01-01 00:20:37   │               1 │           8.9 │          1 │ N                  │           79 │          196 │            2 │          26 │   0.5 │     0.5 │          0 │            0 │                   0.3 │         27.8 │                      │
 8. │        2 │ 2019-01-01 00:00:52  │ 2019-01-01 00:03:45   │               1 │          0.43 │          1 │ N                  │          236 │          263 │            2 │           4 │   0.5 │     0.5 │          0 │            0 │                   0.3 │          5.3 │                      │
 9. │        2 │ 2019-01-01 00:00:49  │ 2019-01-01 00:11:39   │               1 │          4.39 │          1 │ N                  │          236 │          226 │            2 │          13 │   0.5 │     0.5 │          0 │            0 │                   0.3 │         17.3 │                      │
10. │        2 │ 2019-01-01 00:00:59  │ 2019-01-01 00:33:42   │               1 │         17.45 │          1 │ N                  │          132 │          145 │            2 │          48 │   0.5 │     0.5 │          0 │            0 │                   0.3 │         49.8 │                      │
11. │        1 │ 2019-01-01 00:00:48  │ 2019-01-01 00:14:54   │               3 │           4.6 │          1 │ N                  │           48 │           13 │            2 │          15 │   0.5 │     0.5 │          0 │            0 │                   0.3 │         16.3 │                      │
12. │        1 │ 2019-01-01 00:00:35  │ 2019-01-01 01:04:14   │               1 │          15.7 │          1 │ N                  │          226 │          129 │            3 │          54 │   0.5 │     0.5 │          0 │            0 │                   0.3 │         55.3 │                      │
13. │        2 │ 2019-01-01 00:00:52  │ 2019-01-01 00:14:02   │               6 │          2.67 │          1 │ N                  │          114 │          162 │            1 │          11 │   0.5 │     0.5 │       2.46 │            0 │                   0.3 │        14.76 │                      │
14. │        1 │ 2019-01-01 00:00:40  │ 2019-01-01 00:16:07   │               1 │           4.7 │          1 │ N                  │          142 │          260 │            3 │          16 │   0.5 │     0.5 │          0 │            0 │                   0.3 │         17.3 │                      │
15. │        1 │ 2019-01-01 00:00:46  │ 2019-01-01 00:23:58   │               1 │          12.4 │          1 │ N                  │          141 │          133 │            1 │          34 │   0.5 │     0.5 │        4.2 │            0 │                   0.3 │           40 │                      │
16. │        2 │ 2019-01-01 00:00:28  │ 2019-01-01 00:20:34   │               6 │          6.04 │          1 │ N                  │          114 │          263 │            1 │          21 │   0.5 │     0.5 │       4.46 │            0 │                   0.3 │        26.76 │                      │
17. │        2 │ 2019-01-01 00:00:54  │ 2019-01-01 00:03:23   │               4 │          0.86 │          1 │ N                  │          151 │          239 │            1 │           4 │   0.5 │     0.5 │          0 │            0 │                   0.3 │          5.8 │                      │
18. │        1 │ 2019-01-01 00:00:49  │ 2019-01-01 00:21:56   │               1 │          14.3 │          1 │ N                  │          132 │          179 │            1 │          38 │   0.5 │     0.5 │       5.97 │            0 │                   0.3 │        45.77 │                      │
19. │        2 │ 2019-01-01 00:00:42  │ 2019-01-01 00:21:09   │               5 │          1.02 │          1 │ N                  │          170 │          234 │            2 │          12 │   0.5 │     0.5 │          0 │            0 │                   0.3 │         13.8 │                      │
20. │        2 │ 2019-01-01 00:00:51  │ 2019-01-01 00:02:09   │               1 │          0.03 │          1 │ N                  │           90 │          234 │            2 │           3 │   0.5 │     0.5 │          0 │            0 │                   0.3 │          4.3 │                      │
21. │        4 │ 2019-01-01 00:00:05  │ 2019-01-01 00:11:05   │               1 │          1.53 │          1 │ N                  │          231 │          148 │            2 │           9 │   0.5 │     0.5 │          0 │            0 │                   0.3 │         10.3 │                      │
22. │        2 │ 2019-01-01 00:00:53  │ 2019-01-01 00:32:59   │               3 │          18.5 │          2 │ N                  │          132 │           79 │            1 │          52 │     0 │     0.5 │       7.92 │            0 │                   0.3 │        60.72 │                      │
23. │        2 │ 2019-01-01 00:00:18  │ 2019-01-01 00:01:43   │               1 │          0.28 │          1 │ N                  │          162 │          162 │            2 │           3 │   0.5 │     0.5 │          0 │            0 │                   0.3 │          4.3 │                      │
24. │        1 │ 2019-01-01 00:00:28  │ 2019-01-01 00:02:47   │               1 │           0.4 │          1 │ N                  │          234 │          186 │            1 │           3 │   0.5 │     0.5 │        1.4 │            0 │                   0.3 │          6.2 │                      │
25. │        1 │ 2019-01-01 00:00:18  │ 2019-01-01 00:23:45   │               1 │           5.6 │          1 │ N                  │           50 │          226 │            1 │          21 │   0.5 │     0.5 │          3 │            0 │                   0.3 │         25.3 │                      │
26. │        2 │ 2019-01-01 00:00:13  │ 2019-01-01 00:18:33   │               1 │          9.36 │          1 │ N                  │          233 │          127 │            2 │          27 │   0.5 │     0.5 │          0 │            0 │                   0.3 │         28.3 │                      │
27. │        2 │ 2019-01-01 00:00:37  │ 2019-01-01 00:07:04   │               5 │          1.54 │          1 │ N                  │          237 │          263 │            2 │           6 │   0.5 │     0.5 │          0 │            0 │                   0.3 │          7.8 │                      │
28. │        1 │ 2019-01-01 00:00:14  │ 2019-01-01 00:01:33   │               1 │           0.2 │          1 │ N                  │          223 │          223 │            3 │           3 │   0.5 │     0.5 │          0 │            0 │                   0.3 │          4.3 │                      │
29. │        1 │ 2019-01-01 00:00:28  │ 2019-01-01 00:05:14   │               1 │           0.8 │          1 │ N                  │          246 │           68 │            1 │           5 │   0.5 │     0.5 │          1 │            0 │                   0.3 │          7.8 │                      │
30. │        2 │ 2019-01-01 00:00:53  │ 2019-01-01 00:05:51   │               1 │          0.78 │          1 │ N                  │          224 │          234 │            2 │           5 │   0.5 │     0.5 │          0 │            0 │                   0.3 │          6.3 │                      │
31. │        2 │ 2019-01-01 00:00:53  │ 2019-01-01 00:31:01   │               1 │          5.21 │          1 │ N                  │          158 │          263 │            1 │          22 │   0.5 │     0.5 │          1 │            0 │                   0.3 │         24.3 │                      │
32. │        2 │ 2019-01-01 00:00:15  │ 2019-01-01 00:02:07   │               1 │          0.39 │          1 │ N                  │          166 │          166 │            2 │           3 │   0.5 │     0.5 │          0 │            0 │                   0.3 │          4.8 │                      │
33. │        1 │ 2019-01-01 00:00:25  │ 2019-01-01 00:04:55   │               1 │           1.9 │          1 │ N                  │          158 │          158 │            3 │           4 │   0.5 │     0.5 │          0 │            0 │                   0.3 │          5.8 │                      │
34. │        2 │ 2019-01-01 00:00:31  │ 2019-01-01 00:19:23   │               1 │          4.66 │          1 │ N                  │           10 │          130 │            1 │          17 │   0.5 │     0.5 │          0 │            0 │                   0.3 │         18.8 │                      │
35. │        2 │ 2019-01-01 00:00:40  │ 2019-01-01 00:15:46   │               1 │          2.02 │          1 │ N                  │           79 │          158 │            2 │          11 │   0.5 │     0.5 │          0 │            0 │                   0.3 │         12.8 │                      │
36. │        2 │ 2019-01-01 00:00:15  │ 2019-01-01 00:08:20   │               1 │          2.94 │          1 │ N                  │          170 │          263 │            1 │          10 │   0.5 │     0.5 │       2.26 │            0 │                   0.3 │        13.56 │                      │
37. │        2 │ 2019-01-01 00:00:01  │ 2019-01-01 00:05:17   │               6 │          1.73 │          1 │ N                  │          263 │           74 │            2 │           7 │   0.5 │     0.5 │          0 │            0 │                   0.3 │          8.3 │                      │
38. │        1 │ 2019-01-01 00:00:31  │ 2019-01-01 00:04:41   │               1 │           0.3 │          1 │ N                  │          158 │          249 │            4 │           4 │   0.5 │     0.5 │          0 │            0 │                   0.3 │          5.8 │                      │
39. │        1 │ 2019-01-01 00:00:34  │ 2019-01-01 00:09:55   │               1 │           1.7 │          1 │ N                  │          164 │          224 │            1 │           8 │   0.5 │     0.5 │          1 │            0 │                   0.3 │         10.8 │                      │
40. │        1 │ 2019-01-01 00:00:06  │ 2019-01-01 00:44:05   │               1 │           3.2 │          1 │ N                  │          114 │           79 │            1 │          26 │   0.5 │     0.5 │       5.45 │            0 │                   0.3 │        32.75 │                      │
41. │        2 │ 2019-01-01 00:00:52  │ 2019-01-01 00:09:33   │               1 │          1.87 │          1 │ N                  │          148 │          231 │            1 │           8 │   0.5 │     0.5 │          1 │            0 │                   0.3 │         10.3 │                      │
42. │        1 │ 2019-01-01 00:00:52  │ 2019-01-01 00:11:14   │               1 │           1.2 │          1 │ N                  │          137 │          186 │            2 │           8 │   0.5 │     0.5 │          0 │            0 │                   0.3 │          9.8 │                      │
43. │        2 │ 2019-01-01 00:00:09  │ 2019-01-01 00:18:03   │               2 │          6.45 │          1 │ N                  │          161 │          209 │            1 │          21 │   0.5 │     0.5 │       4.46 │            0 │                   0.3 │        26.76 │                      │
44. │        2 │ 2019-01-01 00:00:11  │ 2019-01-01 00:04:24   │               1 │          1.29 │          1 │ N                  │          237 │          263 │            1 │           6 │   0.5 │     0.5 │       1.46 │            0 │                   0.3 │         8.76 │                      │
45. │        2 │ 2019-01-01 00:00:37  │ 2019-01-01 00:10:58   │               1 │          1.51 │          1 │ N                  │           79 │          249 │            1 │           8 │   0.5 │     0.5 │       2.45 │            0 │                   0.3 │        12.25 │                      │
    └──────────┴──────────────────────┴───────────────────────┴─────────────────┴───────────────┴────────────┴────────────────────┴──────────────┴──────────────┴──────────────┴─────────────┴───────┴─────────┴────────────┴──────────────┴───────────────────────┴──────────────┴──────────────────────┘

45 rows in set. Elapsed: 6.288 sec. Processed 101.25 million rows, 13.53 GB (16.10 million rows/s., 2.15 GB/s.)
Peak memory usage: 91.59 MiB.
```

postgres
```
test=# select * from yellow_tripdata where tpep_pickup_datetime like '%2020-01-01 00:00%';
Время: 165727,263 мс (02:45,727)
```