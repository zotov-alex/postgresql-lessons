 
# Домашнее задание №09
В рамках данного задания выполняется запуск СУБД PostgreSQL с использованием оркестрации.

---
## Подготовка
Работа выполняется на компьютере с Ryzen 7 5700X, 32 ГБ ОЗУ, ОС - Debian 12.

Для выполнения работы требуется kubernetes. Установка minikube:
```
wget https://storage.googleapis.com/minikube/releases/latest/minikube_latest_amd64.deb -O /tmp/minikube_latest_amd64.deb
sudo dpkg -i /tmp/minikube_latest_amd64.deb
```
Для работы minikube требуется установленный гипервизор, например qemu-kvm. На момент выполнения задания на компьютере уже присутствуют установленные qemu-kvm (в качестве зависимости virt-manager) и Docker, поэтому дополнительные действия не требуются.

Для возможности работы с виртуальными машинами от имени пользователей кроме root, стоит добавить текущего пользователя в группу kvm, если он не добавлен, и после этого переподключиться к терминалу:
```
sudo usermod -a -G kvm user
```
Установка kubectl в Debian:
```
sudo apt install kubernetes-client
```
Следует иметь в виду, что версия kubectl из репозитория Debian может иметь достаточно старую версию, и, вероятно, стоит установить kubectl в виде бинарника, как описано в [документации](https://kubernetes.io/docs/tasks/tools/install-kubectl-linux/). Бинарный файл helm сохранен в `/usr/local/bin/`.

Установка Helm при помощи штатного пакетного менеджера описана в [документации](https://helm.sh/docs/intro/install/). После установки, для упрощения работы в виде автодополнения команд и подсказок в текущей сессии bash, можно выполнить команду:
```
source <(helm completion bash)
```
Если есть необходимость сохранить автодополнение команд для helm, можно добавить системные настройки, которые будут применяться для всех сессий терминала, при помощи команды:
```
helm completion bash > /etc/bash_completion.d/helm
```

Запустить minikube можно при помощи команды:
```
minikube start --memory=8192 --cpus=4
```
При этом будет создана виртуальная машина minikube (её видно в virt-manager) и преднастроен .kube/config для подключения kubectl к запущенному kubernetes.